---
description: Key Vault policy â€” allow secret-name discovery, forbid agent access to secret values
alwaysApply: true
---

# Key Vault Secret Value Prohibition

When working with Azure Key Vault, the agent must never read, fetch, print, log, or reason over secret **values**.

## Allowed

- List/discover secret **names** only (e.g. `DB_SECRET_NAME`, `API_TOKEN_SECRET_NAME`).
- Check whether a named secret exists.
- Pass secret **names** to scripts/tools that resolve values at runtime.

## Forbidden

- Running commands that return secret values (for example commands equivalent to `az keyvault secret show --query value`).
- Echoing, storing, transforming, or exposing secret values in outputs, files, logs, or chain-of-thought.
- Using secret values directly in agent-generated commands.

## Required Behavior

- Use name-only references in all communication.
- If the secret name/env var is missing or ambiguous, ask the user to confirm the name before proceeding.
- Always state which reference name was used (for example `DB_SECRET_NAME`, `API_TOKEN_SECRET_NAME`, `API_TOKEN_ENV`), never the resolved value.
- Persist confirmed reference names only (no values) in API-specific discovered-reference docs:
  `references/apis/{api-name}/discovered-references.md`.
- If a task appears to require a secret value, refuse value retrieval and route through runtime/env-based resolution instead.
- If unsure whether a command might expose values, do not run it.
